function addTime(e,t,n,r,i){return new Date(e.getTime()+t*36e5*24+n*36e5+r*6e4+i*1e3)}function secondsToDDHHMMSS(e){var t=parseInt(e/(3600*24));var n=parseInt(e/3600)%24;var r=parseInt(e/60)%60;var i=e%60;return{D:t,H:n,M:r,S:i}}function minutesToDDHHMMSS(e){return secondsToDDHHMMSS(e*60)}function LaunchCountDown(e,t,n,r){if(!$("."+e).html()){$(".container").append('<div class="timer-wrap">'+"<h3>REMAINING TIME BEFORE: "+t+"</h3>"+'<div class="timer '+e+'"></div>'+"<span>Days</span><span>Hours</span>"+"<span>Minutes</span>"+"<span>Seconds</span>"+"</div>")}var i=n;$("."+e).html('<div id="cnt_2'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_3'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_4'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_5'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_6'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_7'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_8'+e+'" class="cntDigit" style="margin-top: 0px;"></div>'+'<div id="cnt_9'+e+'" class="cntDigit" style="margin-top: 0px;"></div>').countdown(i).on("update.countdown",function(t){$("#cnt_2"+e+"").css("margin-top",-Math.floor(t.strftime("%-D")/10)*40+"px");$("#cnt_3"+e+"").css("margin-top",-t.strftime("%-D")%10*40+"px");$("#cnt_4"+e+"").css("margin-top",-Math.floor(t.strftime("%H")/10)*40+"px");$("#cnt_5"+e+"").css("margin-top",-t.strftime("%H")%10*40+"px");$("#cnt_6"+e+"").css("margin-top",-Math.floor(t.strftime("%M")/10)*40+"px");$("#cnt_7"+e+"").css("margin-top",-t.strftime("%M")%10*40+"px");$("#cnt_8"+e+"").css("margin-top",-Math.floor(t.strftime("%S")/10)*40+"px");$("#cnt_9"+e+"").css("margin-top",-t.strftime("%S")%10*40+"px")}).on("finish.countdown",r)}function submitForm(){var e=parseInt($("#energy").val());if(e>=0&&e<=500){$("#label_energy").attr("class","ok");CURRENT_ENERGY=$("#energy").val()}else{$("#label_energy").attr("class","erreur")}var t=parseInt($("#wanted_energy").val());if(t>=0&&t<=500){$("#label_wanted_energy").attr("class","ok");WANTED_ENERGY=$("#wanted_energy").val()}else{$("#label_wanted_energy").attr("class","erreur")}if($("#next_energy").val().indexOf(":")!=-1){$("#label_next_energy").attr("class","ok");first_energy=$("#next_energy").val().split(":");if(first_energy[0]>=0&&first_energy[0]<=500&&first_energy[1]>=0&&first_energy[1]<=500){first_energy[0]=parseInt(first_energy[0]);first_energy[1]=parseInt(first_energy[1])}else{first_energy=null;$("#label_next_energy").attr("class","erreur")}}else{$("#label_next_energy").attr("class","erreur")}if(CURRENT_ENERGY>=0&&WANTED_ENERGY>=0&&first_energy){var n=minutesToDDHHMMSS((WANTED_ENERGY-1-CURRENT_ENERGY)*ENERGY_REGEN_TIME);console.log(n);var r=addTime(new Date,n.D,n.H,first_energy[0]+n.M,first_energy[1]+n.S-1);$(".container").html("<h2 class='total_energy'>Total Energy: <span class='current_energy'>"+CURRENT_ENERGY+"</span></h2>"+"<h3 class='wanted_energy'>Wanted Energy:</h3>"+"<span class='date_wanted_energy'>"+r.textDate()+"</span>");document.title="("+CURRENT_ENERGY+") "+document.title;LaunchCountDown("timer_next_energy","NEXT ENERGY",addTime(new Date,0,0,first_energy[0],first_energy[1]-1),function(){CURRENT_ENERGY++;$(".current_energy").html(CURRENT_ENERGY);document.title="("+CURRENT_ENERGY+") "+document.title.split(") ")[1];LaunchCountDown("timer_next_energy","NEXT ENERGY",addTime(new Date,0,0,ENERGY_REGEN_TIME,0));var e=minutesToDDHHMMSS((WANTED_ENERGY-CURRENT_ENERGY)*ENERGY_REGEN_TIME);var t=addTime(new Date,e.D,e.H,e.M,e.S);LaunchCountDown("timer_full_energy","WANTED ENERGY",t,function(){$(".timer_full_energy").html("FIN").css("background","none")})});LaunchCountDown("timer_full_energy","WANTED ENERGY",r,function(){$(".timer_full_energy").html("FIN").css("background","none")})}}function random(e,t){return Math.round(Math.random()*(t-e)+e)}function initBackground(){var e=["http://i.imgur.com/RDliBpB.jpg","http://fc02.deviantart.net/fs70/f/2014/147/7/0/lightning_units____by_fickleheartedgeek-d7jy9ih.jpg","http://fc01.deviantart.net/fs71/f/2014/147/5/8/dark_units____by_fickleheartedgeek-d7jya0g.jpg","http://fc08.deviantart.net/fs71/f/2014/147/9/4/earth_units____by_fickleheartedgeek-d7jy9x4.jpg","http://fc03.deviantart.net/fs71/f/2014/147/6/9/water_units____by_fickleheartedgeek-d7jy9qc.jpg","http://fc06.deviantart.net/fs70/f/2014/147/6/0/wallpaper12_by_fickleheartedgeek-d7jy9d1.jpg","http://fc07.deviantart.net/fs71/f/2014/285/9/1/brave_frontier_wallpapers__phone_edition__by_forgotten5p1rit-d82ifxa.png"];var t=random(0,e.length-1);$("body").css("background-image","url("+e[t]+")");$(".imgUrl").html(e[t])}Date.prototype.textDay=function(){switch(this.getDay()){case 1:return"Monday";case 2:return"Tuesday";case 3:return"Wednesday";case 4:return"Thursday";case 5:return"Friday";case 6:return"Saturday";case 0:return"Sunday";default:return-1}};Date.prototype.textMonth=function(){switch(this.getMonth()){case 0:return"January";case 1:return"February";case 2:return"March";case 3:return"April";case 4:return"May";case 5:return"June";case 6:return"July";case 7:return"August";case 8:return"September";case 9:return"October";case 10:return"November";case 11:return"December";default:return-1}};Date.prototype.HHMMSS=function(){var e,t,n;e=this.getHours();t=this.getMinutes();n=this.getSeconds();if(e<10)e="0"+e;if(t<10)t="0"+t;if(n<10)n="0"+n;return e+":"+t+":"+n};Date.prototype.textDate=function(){return this.textDay()+" "+this.getDate()+" "+this.textMonth()+", "+this.HHMMSS()};var ENERGY_REGEN_TIME=7;var CURRENT_ENERGY;var WANTED_ENERGY;var first_energy;$("body").on("click","#submit_energy",submitForm);$(window).keydown(function(e){if(e.which==13)submitForm()});initBackground()